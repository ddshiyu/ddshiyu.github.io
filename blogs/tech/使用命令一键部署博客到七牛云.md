---
title: 使用命令一键部署博客到七牛云
date: 2022-03-02
categories:
 - 技术
tags:
 - 服务器
publish: true
---
:::tip
作为一个资深白嫖党，在发现七牛云每个月送10G CDN流量之后，打算把博客迁移到这边。
:::
<!-- more -->
## 2022年3月4日更新
昨天发现在有免费额度的情况下居然消耗了费用，随即提交了一个工单。

下午七牛云客服打来电话，那边说只有http流量的免费的，https是需要收费的。Emmm，好吧，这。。。

还是选择付费把！

## 原文

本来打算一直使用腾讯云的云开发的，但是缓存的问题一直无法解决，所以打算使用七牛云，正好七牛云也有命令上传文件的工具，可以专注于写作。

## 安装

在七牛云[开发者中心](https://developer.qiniu.com/kodo/5972/kodo-browser)这里有各种工具，第一种图形化工具肯定是最简单的，它类似于阿里云的oss浏览器，可以执行增删改查操作。但是作为程序员肯定希望能够使用命令行来操作，这样效率更高一点，似乎也更酷一点。

![](https://blog.jdqiong.cn/202203041707477.png)

> qshell 是利用七牛文档上公开的API实现的一个方便开发者测试和使用七牛API服务的命令行工具。该工具设计和开发的主要目的就是帮助开发者快速解决问题。目前该工具融合了七牛存储，CDN，以及其他的一些七牛服务中经常使用到的方法对应的便捷命令，比如b64decode，就是用来解码七牛的URL安全的Base64编码用的，所以这是一个面向开发者的工具，任何新的被认为适合加到该工具中的命令需求，都可以在ISSUE列表里面提出来，我们会尽快评估实现，以帮助大家更好地使用七牛服务。

github [地址](https://github.com/qiniu/qshell)，然后下载对应操作系统的应用，我是用的windows系统，需要把qshell添加到环境变量。

![](https://blog.jdqiong.cn/202203041709594.png)

## 使用

然后就可以使用qshell命令了，官方给的命令很多，但是大部分情况也就只用那几个。

![](https://blog.jdqiong.cn/202203041710308.png)


| 命令    | 类别  | 描述                                                                |
| ------- | :---: | ------------------------------------------------------------------- |
| account | 账号  | 设置或显示当前用户的AccessKey和SecretKey                            |
| qupload | 上传  | 同步数据到七牛空间， 带同步进度信息，和数据上传完整性检查（配置式） |
| get     | 下载  | 下载存储空间中的文件                                                |
| delete  | 删除  | 删除七牛空间中的一个文件                                            |

* **account**

在任何操作之前都需要先进行登录，AccessKey和SecretKey都可以在七牛云官网的个人中心获得。
```
qshell account [--overwrite | -w]<Your AccessKey> <Your SecretKey> <Your Account Name>
```
-w --overwrite 强制覆盖已经存在的账户

| 参数名    | 描述                                                                                      |
| --------- | ----------------------------------------------------------------------------------------- |
| AccessKey | 七牛账号对应的AccessKey                                                                   |
| SecretKey | 七牛账号对应的SecretKey                                                                   |
| Name      | 账户的名字, 可以任意取，和在七牛注册的邮箱信息没有关系， 只是qshell本地用来标示<ak, sk>对 |

* **qupload**

在需要上传的文件夹根目录新建一个`upload.conf`文件，可选参数比较多，大多时候可以省略。

```
qshell qupload [-c <ThreadCount>] [--sucess-list <SuccessFileName>] [--failure-list <FailureFileName>] [--overwrite-list <OverFileName>] [--callback-urls <CallbackUrls>] [--callback-host <CallbackHost>]
<LocalUploadConfig>
```

LocalUploadConfig文件格式
```config
{
  # 文件夹路径（绝对路径）
  "src_dir": "C:\\Users\\92584\\Desktop\\ddshiyu.github.io\\public",
  # 空间名称
  "bucket": "jiandongblog",
  # 是否覆盖
  "overwrite" : true,
  # 检测新增文件
  "rescan_local" : true
}
```
执行命令`qshell qupload upload.conf`，可以看到已经上传成功了。

![](https://blog.jdqiong.cn/202203041214902.png)

* **get**

```
qshell get <Bucket> <Key> [-o <OutFile>]
```
|  参数名   | 描述  |
|  ----  | ----  |
| Bucket  | 存储空间 |
| Key  | 存储空间中的文件名字 |
| OutFile  | 保存在本地的名字，不指定，默认使用存储空间中的名字 |

```
$ qshell get qiniutest test.txt -o /Users/caijiaqiang/hah.txt
```

* **delete**

```
qshell delete <Bucket> <Key>
```
|  参数名   | 描述  |
|  ----  | ----  |
| Bucket  | 存储空间 |
| Key  | 存储空间中的文件名字 |

```
qshell delete if-pbl qiniu.mp4
```